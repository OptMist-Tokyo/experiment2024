<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>あ</title>
        <script>
            function setClipHeight(hydrate_time) {
                var percentage = (hydrate_time / 120) * 100 / 2;
                document.querySelector('.clip-svg img').style.setProperty('--clip-height', percentage + '%');
            }
            setClipHeight(hydrate_time);

            function reloadIfClosed(timeInterval) {
                if (document.getElementById("settings").open) {
                    setTimeout(reloadIfClosed, timeInterval);
                } else {
                    location.reload(true);
                }
            }
            setTimeout(reloadIfClosed, 10000);
        </script>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.bundle.js"></script>
        <style>
            body {
                background-color: lightcyan;
                font-family: Helvetica, Arial, sans-serif;
                margin: 0;
                height: 100vh;
                display: grid;
                grid-template-columns: 70% 30%;
                grid-template-rows: auto 1fr auto;
            }
            header {
                grid-column: 1 / 2;
                grid-row: 1;
                padding: 10px;
            }
            .main-content {
                grid-column: 1 / 2;
                grid-row: 2;
                display: flex;
                justify-content: center;
                align-items: center;
            }
            .main-content img {
                max-width: 100%;
                height: auto;
            }
            .right-side {
                grid-column: 2 / 3;
                grid-row: 1 / 4;
                display: flex;
                align-items: center;
                flex-direction: column;
            }
            .right-side table {
                margin: 20px 0;
            }
            .double-svg {
                position: relative;
                width: 60%;
                height: auto;
            }
            .double-svg svg{
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: auto;
            }
            .clip-svg svg {
                clip-path: polygon(0 0, 100% 0, 100% var(--clip-height, 50%), 0 var(--clip-height, 50%));
            }
            details {
                grid-column: 1 / 2;
                grid-row: 3;
                justify-self: end;
                padding: 10px;
                /* text-align: center; */
                border: 1px solid gray;
            }
            td {
                padding: 1px 8px;
            }
            progress {
                border: none;
                background-color: none;
            }
            ::-webkit-progress-bar {
                background-color: gainsboro;
                border-radius: 5px;
                height: 10px;
            }
            ::-webkit-progress-value {
                background-color: deepskyblue;
                border-radius: 5px;
            }
            input[type="number"] {
                width: 50px;
            }
        </style>
    </head>
    <body>
        <header>
            <h2>あ</h2>
        </header>
        <div class="main-content">
            <select id="chartType" onchange="chartTypeChange()">
                <option value="intakeChart">時間ごとの水分摂取量</option>
                <option value="intakeSumChart">累計水分摂取量の推移</option>
                <!-- <option value="timeChart">水分摂取までの時間の推移</option> -->
            </select>
            <br>
            
            <canvas id="myChart"></canvas>

            <script>
                var myChart;
                function drawChart() {
                    var ctx = document.getElementById("myChart");
                    switch (document.getElementById("chartType").value) {
                        case "intakeChart":
                            myChart = new Chart(ctx, {
                            type: 'bar',
                            data: {
                                labels: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23],
                                datasets: [
                                {
                                    label: '水分摂取量 [mL]',
                                    data: [31, 41, 59, 26, 53, 58, 97, 93],
                                    borderColor: "rgba(0,0,255,0.5)",
                                    backgroundColor: "rgba(0,0,255,0.5)"
                                }
                                ],
                            },
                            options: {
                                title: {
                                display: true,
                                text: '水分摂取量'
                                },
                                scales: {
                                    
                                yAxes: [{
                                    ticks: {
                                    suggestedMax: 200,
                                    suggestedMin: 0,
                                    stepSize: 10,
                                    callback: function(value, index, values){
                                        return  value
                                    }
                                    }
                                }]
                                },
                            }
                            });
                            break;
                        case "intakeSumChart":
                            myChart = new Chart(ctx, {
                            type: 'line',
                            data: {
                                labels: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23],
                                datasets: [
                                {
                                    label: '累計水分摂取量 [mL]',
                                    data: [31, 72, 131, 157, 210, 268, 365, 458],
                                    borderColor: "rgba(0,0,255,0.5)",
                                    backgroundColor: "rgba(0,0,255,0.5)"
                                }
                                ],
                            },
                            options: {
                                title: {
                                display: true,
                                text: '水分摂取量'
                                },
                                scales: {
                                    
                                yAxes: [{
                                    ticks: {
                                    suggestedMax: 1200,
                                    suggestedMin: 0,
                                    stepSize: 100,
                                    callback: function(value, index, values){
                                        return  value
                                    }
                                    }
                                }]
                                },
                            }
                            });
                            break;
                        case "timeChart":
                            break;
                    }
                }

                function chartTypeChange() {
                    if (myChart) {
                        myChart.destroy();
                    }
                    drawChart();
                }

                drawChart();
            </script>

            

        </div>
        <div class="right-side">
            <table>
                <tr>
                    <td>次の水分補給まで残り</td>
                    <td><progress id="water" max="120" value="%(hydrate_time)d"></progress></td>
                    <td>%(hydrate_time)d 分</td>
                </tr>
                <tr>
                    <td>飲み物からの水分摂取量</td>
                    <td><progress id="water" max="1200" value="%(sum_intake).1f"></progress></td>
                    <td>本日 %(sum_intake).1f mL / 目標 1200 mL</td>
                </tr>
            </table>
            <div class="double-svg">
                    <svg version="1.0" xmlns="http://www.w3.org/2000/svg"
                        width="640.000000pt" height="1280.000000pt" viewBox="0 0 640.000000 1280.000000"
                        preserveAspectRatio="xMidYMid meet">
                        <metadata>
                            Created by potrace 1.15, written by Peter Selinger 2001-2017
                        </metadata>
                        <g transform="translate(0.000000,1280.000000) scale(0.100000,-0.100000)"
                        fill="deepskyblue" stroke="none">
                            <path d="M2785 12782 c-179 -55 -322 -164 -414 -316 -66 -110 -66 -114 -78
                            -591 -4 -161 -2 -212 10 -260 9 -33 21 -100 27 -150 16 -128 25 -155 91 -292
                            52 -106 86 -153 119 -165 5 -2 11 -14 15 -28 5 -23 -2 -30 -87 -80 -51 -29
                            -124 -75 -163 -100 -38 -26 -104 -59 -145 -74 -67 -23 -124 -57 -239 -142 -19
                            -13 -59 -32 -89 -40 -72 -21 -168 -89 -219 -155 -83 -107 -113 -240 -128 -568
                            -6 -138 -5 -166 16 -266 l23 -111 -56 -155 c-60 -167 -80 -240 -99 -364 -11
                            -73 -18 -91 -89 -205 -134 -217 -194 -358 -225 -527 -9 -49 -27 -133 -40 -188
                            -12 -55 -35 -156 -50 -224 -35 -162 -100 -362 -180 -555 -35 -85 -83 -206
                            -106 -268 -23 -62 -81 -192 -130 -290 -83 -165 -89 -183 -104 -280 -8 -57 -20
                            -119 -25 -138 -6 -19 -10 -84 -9 -145 0 -86 5 -124 23 -175 27 -79 49 -89 73
                            -33 13 32 14 47 4 94 -21 104 -7 122 28 35 23 -56 44 -80 124 -140 56 -41 72
                            -45 80 -15 9 32 -10 70 -59 120 -32 32 -48 59 -55 90 -6 24 -17 58 -26 76 -9
                            19 -13 36 -10 40 11 10 35 -17 67 -72 18 -31 52 -69 83 -92 76 -58 95 -67 113
                            -52 31 26 3 85 -61 129 -25 17 -45 35 -45 41 0 5 -9 28 -20 51 -15 31 -17 45
                            -9 55 9 10 22 3 66 -37 70 -64 88 -74 102 -56 16 19 -2 62 -43 106 -48 50 -70
                            93 -63 121 4 13 22 49 41 79 81 128 97 158 116 215 10 33 31 89 46 125 22 52
                            27 79 26 139 -1 61 4 83 25 125 45 89 167 285 293 471 328 484 354 538 494
                            986 25 81 47 131 72 163 19 25 38 46 42 46 5 0 18 -51 31 -112 12 -62 34 -158
                            48 -213 24 -96 24 -105 13 -215 -6 -63 -20 -160 -31 -215 -28 -141 -35 -287
                            -16 -348 14 -43 14 -54 1 -95 -8 -26 -19 -81 -25 -122 -5 -41 -28 -127 -49
                            -190 -47 -138 -66 -249 -75 -430 -7 -148 -22 -266 -60 -465 -64 -341 -89 -605
                            -89 -960 0 -158 5 -330 12 -395 16 -146 71 -539 79 -565 4 -11 7 -162 8 -335
                            2 -304 1 -322 -28 -520 -77 -521 -22 -818 304 -1637 160 -402 185 -494 159
                            -565 -7 -18 -15 -68 -20 -110 -6 -69 -12 -86 -65 -175 -47 -78 -87 -127 -201
                            -243 -79 -80 -163 -166 -188 -191 -28 -30 -49 -63 -56 -90 -12 -44 -6 -109 10
                            -109 5 0 13 -12 16 -26 8 -30 48 -79 114 -138 30 -25 38 -28 81 -23 29 4 49 2
                            49 -4 0 -5 16 -17 35 -26 31 -15 42 -15 83 -4 64 17 111 50 120 86 7 24 18 33
                            57 47 72 26 122 79 146 158 20 66 106 227 164 310 66 92 92 181 77 260 -6 34
                            -3 64 11 123 l20 77 -43 133 c-24 72 -49 170 -57 217 -18 107 -30 798 -15 850
                            6 19 22 69 37 110 23 62 28 91 27 165 -1 161 -48 399 -115 585 -19 52 -42 128
                            -51 168 -15 66 -15 78 -1 131 8 32 19 101 25 154 5 52 14 107 20 121 18 49 49
                            229 74 432 20 162 33 225 66 330 99 310 276 1005 315 1234 14 85 35 197 45
                            247 11 51 20 95 20 98 0 3 4 5 9 5 4 0 6 -87 3 -192 -3 -157 0 -233 19 -408
                            27 -248 29 -435 10 -895 -23 -569 5 -889 94 -1085 18 -41 41 -113 50 -160 9
                            -47 37 -146 63 -220 l47 -135 0 -305 c0 -215 4 -315 12 -340 7 -19 24 -116 39
                            -215 44 -303 44 -891 -1 -1030 -9 -27 -22 -99 -29 -160 -11 -92 -21 -127 -59
                            -215 -25 -58 -58 -139 -72 -180 -36 -99 -72 -161 -138 -238 -53 -61 -77 -115
                            -77 -173 0 -12 -18 -48 -40 -81 -52 -78 -53 -117 -6 -164 36 -36 78 -44 116
                            -24 15 8 24 5 44 -15 29 -29 71 -33 105 -9 18 13 28 14 47 5 38 -17 53 -14 84
                            17 24 25 30 27 46 15 27 -20 43 -16 74 17 17 18 31 26 35 20 15 -24 67 -10
                            101 26 19 19 34 40 34 45 0 5 6 9 14 9 34 0 166 235 166 295 0 22 29 77 83
                            157 94 139 92 185 -21 414 -74 150 -82 171 -82 224 0 39 26 161 80 376 43 176
                            102 423 130 549 28 127 62 264 76 305 35 103 45 217 34 380 -14 196 -39 318
                            -107 525 -43 129 -42 118 -25 588 12 320 21 436 61 742 11 83 27 233 36 335 8
                            102 20 219 25 260 29 236 44 495 45 765 0 283 -1 292 -27 390 -21 82 -28 138
                            -37 310 -6 116 -11 265 -11 332 0 117 -2 129 -50 295 -43 145 -52 189 -55 273
                            -2 65 -14 147 -34 230 -38 167 -55 285 -48 344 3 26 21 101 40 167 20 66 47
                            176 62 244 37 172 49 208 117 340 52 101 59 121 57 165 -4 81 0 135 11 135 6
                            0 13 -8 17 -17 3 -10 35 -94 70 -188 95 -250 179 -415 299 -593 126 -186 155
                            -241 189 -361 52 -187 80 -245 310 -661 190 -343 253 -468 298 -595 90 -250
                            96 -326 43 -481 -45 -128 -52 -197 -31 -299 9 -44 20 -125 25 -180 11 -118 34
                            -213 58 -237 16 -17 19 -17 52 0 31 15 37 24 49 77 11 47 12 75 4 135 -12 82
                            -9 90 39 90 33 0 58 -33 88 -115 57 -159 58 -347 3 -481 l-27 -66 29 -24 c41
                            -32 51 -30 74 14 10 20 34 45 51 56 22 12 40 37 57 75 14 31 38 83 54 116 16
                            33 29 66 29 73 0 7 8 27 17 45 14 26 16 55 14 160 -3 140 0 129 -115 450 -25
                            70 -55 173 -66 229 -12 56 -23 105 -25 108 -2 4 -13 42 -25 86 -12 43 -36 113
                            -55 154 -18 41 -42 109 -54 150 -21 75 -96 418 -151 691 -37 178 -71 297 -142
                            494 -69 190 -86 222 -225 434 -63 96 -123 197 -133 225 -24 69 -93 207 -176
                            351 l-69 120 -6 125 c-4 82 -15 159 -32 225 -13 55 -37 165 -52 245 -48 247
                            -129 382 -295 488 -47 30 -120 88 -164 130 -63 60 -98 83 -175 119 -162 76
                            -559 314 -581 348 -16 26 -21 66 -30 246 l-12 216 49 49 c60 60 91 122 105
                            210 14 93 7 159 -22 189 -13 14 -28 25 -34 25 -8 0 -10 55 -8 178 4 200 -5
                            267 -47 359 -51 108 -168 203 -323 263 -105 41 -242 49 -333 22z"/>
                        </g>
                    </svg>
                <div class="clip-svg">
                    <svg version="1.0" xmlns="http://www.w3.org/2000/svg"
                        width="640.000000pt" height="1280.000000pt" viewBox="0 0 640.000000 1280.000000"
                        preserveAspectRatio="xMidYMid meet">
                        <metadata>
                            Created by potrace 1.15, written by Peter Selinger 2001-2017
                        </metadata>
                        <g transform="translate(0.000000,1280.000000) scale(0.100000,-0.100000)"
                        fill="rgb(119, 108, 108)" stroke="none">
                            <path d="M2785 12782 c-179 -55 -322 -164 -414 -316 -66 -110 -66 -114 -78
                            -591 -4 -161 -2 -212 10 -260 9 -33 21 -100 27 -150 16 -128 25 -155 91 -292
                            52 -106 86 -153 119 -165 5 -2 11 -14 15 -28 5 -23 -2 -30 -87 -80 -51 -29
                            -124 -75 -163 -100 -38 -26 -104 -59 -145 -74 -67 -23 -124 -57 -239 -142 -19
                            -13 -59 -32 -89 -40 -72 -21 -168 -89 -219 -155 -83 -107 -113 -240 -128 -568
                            -6 -138 -5 -166 16 -266 l23 -111 -56 -155 c-60 -167 -80 -240 -99 -364 -11
                            -73 -18 -91 -89 -205 -134 -217 -194 -358 -225 -527 -9 -49 -27 -133 -40 -188
                            -12 -55 -35 -156 -50 -224 -35 -162 -100 -362 -180 -555 -35 -85 -83 -206
                            -106 -268 -23 -62 -81 -192 -130 -290 -83 -165 -89 -183 -104 -280 -8 -57 -20
                            -119 -25 -138 -6 -19 -10 -84 -9 -145 0 -86 5 -124 23 -175 27 -79 49 -89 73
                            -33 13 32 14 47 4 94 -21 104 -7 122 28 35 23 -56 44 -80 124 -140 56 -41 72
                            -45 80 -15 9 32 -10 70 -59 120 -32 32 -48 59 -55 90 -6 24 -17 58 -26 76 -9
                            19 -13 36 -10 40 11 10 35 -17 67 -72 18 -31 52 -69 83 -92 76 -58 95 -67 113
                            -52 31 26 3 85 -61 129 -25 17 -45 35 -45 41 0 5 -9 28 -20 51 -15 31 -17 45
                            -9 55 9 10 22 3 66 -37 70 -64 88 -74 102 -56 16 19 -2 62 -43 106 -48 50 -70
                            93 -63 121 4 13 22 49 41 79 81 128 97 158 116 215 10 33 31 89 46 125 22 52
                            27 79 26 139 -1 61 4 83 25 125 45 89 167 285 293 471 328 484 354 538 494
                            986 25 81 47 131 72 163 19 25 38 46 42 46 5 0 18 -51 31 -112 12 -62 34 -158
                            48 -213 24 -96 24 -105 13 -215 -6 -63 -20 -160 -31 -215 -28 -141 -35 -287
                            -16 -348 14 -43 14 -54 1 -95 -8 -26 -19 -81 -25 -122 -5 -41 -28 -127 -49
                            -190 -47 -138 -66 -249 -75 -430 -7 -148 -22 -266 -60 -465 -64 -341 -89 -605
                            -89 -960 0 -158 5 -330 12 -395 16 -146 71 -539 79 -565 4 -11 7 -162 8 -335
                            2 -304 1 -322 -28 -520 -77 -521 -22 -818 304 -1637 160 -402 185 -494 159
                            -565 -7 -18 -15 -68 -20 -110 -6 -69 -12 -86 -65 -175 -47 -78 -87 -127 -201
                            -243 -79 -80 -163 -166 -188 -191 -28 -30 -49 -63 -56 -90 -12 -44 -6 -109 10
                            -109 5 0 13 -12 16 -26 8 -30 48 -79 114 -138 30 -25 38 -28 81 -23 29 4 49 2
                            49 -4 0 -5 16 -17 35 -26 31 -15 42 -15 83 -4 64 17 111 50 120 86 7 24 18 33
                            57 47 72 26 122 79 146 158 20 66 106 227 164 310 66 92 92 181 77 260 -6 34
                            -3 64 11 123 l20 77 -43 133 c-24 72 -49 170 -57 217 -18 107 -30 798 -15 850
                            6 19 22 69 37 110 23 62 28 91 27 165 -1 161 -48 399 -115 585 -19 52 -42 128
                            -51 168 -15 66 -15 78 -1 131 8 32 19 101 25 154 5 52 14 107 20 121 18 49 49
                            229 74 432 20 162 33 225 66 330 99 310 276 1005 315 1234 14 85 35 197 45
                            247 11 51 20 95 20 98 0 3 4 5 9 5 4 0 6 -87 3 -192 -3 -157 0 -233 19 -408
                            27 -248 29 -435 10 -895 -23 -569 5 -889 94 -1085 18 -41 41 -113 50 -160 9
                            -47 37 -146 63 -220 l47 -135 0 -305 c0 -215 4 -315 12 -340 7 -19 24 -116 39
                            -215 44 -303 44 -891 -1 -1030 -9 -27 -22 -99 -29 -160 -11 -92 -21 -127 -59
                            -215 -25 -58 -58 -139 -72 -180 -36 -99 -72 -161 -138 -238 -53 -61 -77 -115
                            -77 -173 0 -12 -18 -48 -40 -81 -52 -78 -53 -117 -6 -164 36 -36 78 -44 116
                            -24 15 8 24 5 44 -15 29 -29 71 -33 105 -9 18 13 28 14 47 5 38 -17 53 -14 84
                            17 24 25 30 27 46 15 27 -20 43 -16 74 17 17 18 31 26 35 20 15 -24 67 -10
                            101 26 19 19 34 40 34 45 0 5 6 9 14 9 34 0 166 235 166 295 0 22 29 77 83
                            157 94 139 92 185 -21 414 -74 150 -82 171 -82 224 0 39 26 161 80 376 43 176
                            102 423 130 549 28 127 62 264 76 305 35 103 45 217 34 380 -14 196 -39 318
                            -107 525 -43 129 -42 118 -25 588 12 320 21 436 61 742 11 83 27 233 36 335 8
                            102 20 219 25 260 29 236 44 495 45 765 0 283 -1 292 -27 390 -21 82 -28 138
                            -37 310 -6 116 -11 265 -11 332 0 117 -2 129 -50 295 -43 145 -52 189 -55 273
                            -2 65 -14 147 -34 230 -38 167 -55 285 -48 344 3 26 21 101 40 167 20 66 47
                            176 62 244 37 172 49 208 117 340 52 101 59 121 57 165 -4 81 0 135 11 135 6
                            0 13 -8 17 -17 3 -10 35 -94 70 -188 95 -250 179 -415 299 -593 126 -186 155
                            -241 189 -361 52 -187 80 -245 310 -661 190 -343 253 -468 298 -595 90 -250
                            96 -326 43 -481 -45 -128 -52 -197 -31 -299 9 -44 20 -125 25 -180 11 -118 34
                            -213 58 -237 16 -17 19 -17 52 0 31 15 37 24 49 77 11 47 12 75 4 135 -12 82
                            -9 90 39 90 33 0 58 -33 88 -115 57 -159 58 -347 3 -481 l-27 -66 29 -24 c41
                            -32 51 -30 74 14 10 20 34 45 51 56 22 12 40 37 57 75 14 31 38 83 54 116 16
                            33 29 66 29 73 0 7 8 27 17 45 14 26 16 55 14 160 -3 140 0 129 -115 450 -25
                            70 -55 173 -66 229 -12 56 -23 105 -25 108 -2 4 -13 42 -25 86 -12 43 -36 113
                            -55 154 -18 41 -42 109 -54 150 -21 75 -96 418 -151 691 -37 178 -71 297 -142
                            494 -69 190 -86 222 -225 434 -63 96 -123 197 -133 225 -24 69 -93 207 -176
                            351 l-69 120 -6 125 c-4 82 -15 159 -32 225 -13 55 -37 165 -52 245 -48 247
                            -129 382 -295 488 -47 30 -120 88 -164 130 -63 60 -98 83 -175 119 -162 76
                            -559 314 -581 348 -16 26 -21 66 -30 246 l-12 216 49 49 c60 60 91 122 105
                            210 14 93 7 159 -22 189 -13 14 -28 25 -34 25 -8 0 -10 55 -8 178 4 200 -5
                            267 -47 359 -51 108 -168 203 -323 263 -105 41 -242 49 -333 22z"/>
                        </g>
                    </svg>
                </div>
            </div>
        </div>
        <details id="settings">
            <summary>設定</summary>
            <!-- <form action="http://%(ref_url)s"> -->
            <form>
                <p>
                    ※この設定画面が開いている間は自動更新がされません
                </p>
                <p>
                    体重 <input type="number" value="60" name="weight"> kg
                </p>
                <p>
                    自動更新の間隔 <input type="number" value="10" name="weight"> 秒
                </p>
                <p>
                    <input value="設定を変更" type="submit">
                </p>
            </form>
        </details>
    </body>
</html>